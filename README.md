# リズム・エース (Rhythm Ace)

> **音楽のビートに合わせて操縦・射撃し、スタイリッシュな空中演舞を決める** —— 単一HTMLファイルのシングルページアプリ (SPA)

`#html` `#canvas2d` `#webaudio` `#no-deps` `#single-file` `#vscode`

---

## 目次

* [主な機能](#主な機能)
* [必要なもの](#必要なもの)
* [はじめかた](#はじめかた)
* [遊びかた](#遊びかた)
* [譜面ジェネレータの仕組み（やさしい解説）](#譜面ジェネレータの仕組みやさしい解説)
* [カスタマイズ](#カスタマイズ)
* [リプレイ録画（短尺動画出力）](#リプレイ録画短尺動画出力)
* [トラブルシューティング](#トラブルシューティング)
* [FAQ](#faq)
* [アクセシビリティと操作性](#アクセシビリティと操作性)
* [開発者向けノート](#開発者向けノート)
* [設計ポリシーとUI](#設計ポリシーとui)
* [フォルダ構成](#フォルダ構成)
* [ライセンス / 著作権](#ライセンス--著作権)
* [変更履歴](#変更履歴)


---

## 主な機能

* 🎵 **譜面ジェネレータ**：好きな曲（mp3/wav/ogg）を読み込むと**簡易ビート検出**で譜面を自動生成。
* ✨ **ビート判定 & パルス演出**：ビートが来るとリングが**自動でパルス**。SPACEに合わせると **PERFECT / GOOD / MISS**。
* 🚀 **FLOW システム**：PERFECT/GOODで **加速**＆**ロックオン範囲拡大**。
* 🎯 **ロックオン・ショット**：近くの敵にホーミング。コンボでスコアが伸びる。
* 🎬 **リプレイ録画**：直前のプレイを\*\*deterministic（再現性あり）\*\*に再生して **WebM（無音）** で保存。
* 🧩 **依存ライブラリなし**：HTML1枚。`WebAudio + Canvas2D + MediaRecorder`。
* 🛠️ **VS Code向け**：Live Serverがあると快適。改造しやすい**読みやすい構成**。

---

## 必要なもの

* ブラウザ：**Chrome** もしくは新しめの Edge/Firefox
* エディタ：**Visual Studio Code（VS Code）**
* 音源ファイル：mp3/wav/ogg のいずれか

> SafariはMediaRecorderやAudioまわりで挙動が不安定な場合があります。

---

## はじめかた

1. `rhythm-ace.html` を任意フォルダに保存。
2. VS Codeで開く → （任意）**Live Server** で起動。
3. 右パネルの **「曲ファイル」** に音源をドロップ/選択 → **「譜面を作る（解析）」** をクリック。
4. BPMとBEATSが表示されたら **「▶ ゲーム開始」**。

> ファイル構成はシンプル：**1ファイルだけ**。すぐに遊べて改造できます。

---

## 遊びかた

**移動**：`WASD` または `↑←↓→`
**ショット＆判定**：`SPACE`

| 判定      | 効果                    | 見た目            |
| ------- | --------------------- | -------------- |
| PERFECT | 大きく加速 & ロックオン拡大、コンボ継続 | リングがキュッ→ふわっと光る |
| GOOD    | 少し強化、コンボ継続            | 同上（やや控えめ）      |
| MISS    | コンボ切れ                 | 赤系の表示          |

* 右上HUD：\`SCORE / COMBO / F
